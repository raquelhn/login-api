(this["webpackJsonpfirst-app"]=this["webpackJsonpfirst-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(52),o=n.n(a),r=(n(160),n(161),n(79)),i=n(141),l=n(11),j=n(205),d=n(82),u=n(58),b=function(){return sessionStorage.getItem("token")||null},p=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},O=n(209),h=n(206),g=n(86),x=n.n(g),m=n(7);var v=function(e){var t=Object(c.useState)(e),n=Object(u.a)(t,2),s=n[0],a=n[1];return{value:s,onChange:function(e){a(e.target.value)}}},f=function(e){var t=v(""),n=v(""),s=Object(c.useState)(null),a=Object(u.a)(s,2),o=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(u.a)(i,2),j=l[0],b=l[1],p=Object(c.useState)(""),g=Object(u.a)(p,2),f=(g[0],g[1]);return Object(m.jsxs)("div",{className:"wrapLogin",children:[Object(m.jsx)(O.a,{as:"h1",textAlign:"center",className:"login",children:"Login"}),Object(m.jsxs)(h.a,{centered:!0,children:[Object(m.jsxs)(h.a.Field,{children:[Object(m.jsx)("label",{children:"Username"}),Object(m.jsx)("input",Object(d.a)(Object(d.a)({type:"text"},t),{},{autoComplete:"new-password"}))]}),Object(m.jsxs)(h.a.Field,{children:[Object(m.jsx)("label",{style:{marginTop:10},children:"Password"}),Object(m.jsx)("input",Object(d.a)(Object(d.a)({type:"password"},n),{},{autoComplete:"new-password"}))]}),o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("small",{style:{color:"red"},children:o}),Object(m.jsx)("br",{})]}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"ButtonClick",type:"button",value:j?"Loading...":"Login",onClick:function(){r(null),b(!0),x.a.post("https://api.bybits.co.uk/auth/token",{username:t.value,password:n.value,type:"USER_PASSWORD_AUTH"},{headers:{environment:"mock"}}).then((function(t){var n,c;console.log(t),b(!1),n=t.data.access_token,c=t.data,sessionStorage.setItem("token",n),sessionStorage.setItem("user",JSON.stringify(c)),console.log(t.data),f(t.data.access_token),e.history.push("/private")})).catch((function(e){b(!1),r("Something went wrong. Please try again later.")}))},disabled:j}),Object(m.jsx)("br",{})]})]})},y=n(207);var S=function(e){var t=Object(c.useState)(!0),n=Object(u.a)(t,2),s=n[0],a=n[1];if(Object(c.useEffect)((function(){var e=b();e&&x.a.get("https://api.bybits.co.uk/policys/details",{headers:{environment:"mock",Authorization:"Bearer ".concat(e),"Content-type":"application/json"}}).then((function(e){console.log(e.data.policy),function(e){sessionStorage.setItem("data",JSON.stringify(e))}(e.data),a(!1)})).catch((function(e){p(),a(!1)}))}),[]),s&&b())return Object(m.jsx)("div",{className:"content",children:"Checking Authentication..."});var o=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}(),r=function(){var e=sessionStorage.getItem("data");return e?JSON.parse(e):null}();return console.log(o),console.log(r),r?Object(m.jsx)(y.a,{centered:!0,children:Object(m.jsxs)(y.a.Content,{children:[Object(m.jsx)(y.a.Header,{color:"green",children:"Policy Reference"}),Object(m.jsxs)("p",{children:[" ",r.policy.policy_reference," "]}),Object(m.jsx)(y.a.Header,{children:"Cover Type"}),Object(m.jsx)("p",{children:r.policy.cover}),Object(m.jsx)(y.a.Header,{children:"Car"}),Object(m.jsxs)("p",{children:[r.vehicle.make," ",r.vehicle.model," ",r.vehicle.model," ",r.vehicle.reg]}),Object(m.jsx)(y.a.Header,{children:"Address"}),Object(m.jsxs)("p",{children:[r.policy.address.line_1," ",r.policy.address.line_3," ",r.policy.address.postcode]}),Object(m.jsx)("input",{type:"button",className:"ButtonClick",onClick:function(){p(),e.history.push("/login-api")},value:"Logout"})]})}):Object(m.jsx)("div",{className:"content",children:"Checking Authentication..."})};var k=function(){var e;return Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(l.a,(e={exact:!0,path:"/login-api"},Object(r.a)(e,"exact",!0),Object(r.a)(e,"component",f),e)),Object(m.jsx)(l.a,{path:"/private",exact:!0,component:S})]})})})};n(192);o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.2ca03de7.chunk.js.map