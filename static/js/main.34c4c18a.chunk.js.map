{"version":3,"sources":["utils/Common.js","components/Login.js","components/Content.js","App.js","index.js"],"names":["getToken","sessionStorage","getItem","removeUserSession","removeItem","useFormInput","initialValue","useState","value","setValue","onChange","e","target","Login","props","username","password","error","setError","loading","setLoading","setUserToken","className","Header","as","textAlign","Form","centered","Field","type","autoComplete","style","marginTop","color","onClick","axios","post","headers","environment","then","response","token","user","console","log","data","access_token","setItem","JSON","stringify","history","push","catch","disabled","Content","authLoading","setAuthLoading","useEffect","get","Authorization","policy","setPolicySession","userStr","parse","getUser","dataStr","getPolicyData","Card","policy_reference","cover","vehicle","make","model","reg","address","line_1","line_3","postcode","App","Container","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.34c4c18a.chunk.js","sourcesContent":["\n// return the user data from the session storage\nexport const getUser = () => {\n    const userStr = sessionStorage.getItem('user');\n    if (userStr) return JSON.parse(userStr);\n    else return null;\n  }\n\nexport const getPolicyData = () => {\n    const dataStr = sessionStorage.getItem('data');\n    if (dataStr) return JSON.parse(dataStr);\n    else return null;\n  }\n   \n  // return the token from the session storage\nexport const getToken = () => {\n  return sessionStorage.getItem('token') || null;\n}\n\n  \n   \n  // remove the token and user from the session storage\nexport const removeUserSession = () => {\n  sessionStorage.removeItem('token');\n  sessionStorage.removeItem('user');\n}\n\nexport const removePolicySession = () => {\n  sessionStorage.removeItem('data');\n}\n   \n  // set the token and user from the session storage\nexport const setUserSession = (token, user) => {\n  sessionStorage.setItem('token', token);\n  sessionStorage.setItem('user', JSON.stringify(user));\n}\n\nexport const setPolicySession = (data) => {\n  sessionStorage.setItem('data', JSON.stringify(data));\n}","import React, { useState } from 'react';\nimport { setUserSession } from '../utils/Common';\nimport { Form, Header } from 'semantic-ui-react'\nimport axios from 'axios';\n\n \nfunction Login(props) {\n  const username = useFormInput('');\n  const password = useFormInput('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [userToken, setUserToken] = useState(\"\");\n \n  // handle button click of login form\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.post('https://api.bybits.co.uk/auth/token', \n    { username: username.value, password: password.value, type:\"USER_PASSWORD_AUTH\" },\n    {headers:\n      {environment: 'mock'}\n    }).then(response => {\n      console.log(response)\n      setLoading(false);\n      setUserSession(response.data.access_token, response.data);\n      console.log(response.data)\n      setUserToken(response.data.access_token);\n      //console.log(response.data.access_token);\n      //its sending the props to private\n      props.history.push('/private');\n    }).catch(error => {\n      setLoading(false);\n      setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n \n  return (\n    <div className=\"wrapLogin\">\n    <Header as='h1' textAlign='center' className=\"login\">Login</Header>\n    <Form centered>\n      <Form.Field>\n        <label>Username</label>\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </Form.Field>\n      <Form.Field>\n        <label style={{ marginTop: 10 }}>\n        Password\n        </label>\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </Form.Field>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input className=\"ButtonClick\" type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />    \n    </Form>\n    </div>\n  );\n}\n \nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n \n  const handleChange = e => {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n \nexport default Login;","import React, { useState, useEffect } from 'react';\nimport {getToken, getUser, removeUserSession, getPolicyData,setPolicySession} from '../utils/Common';\nimport { Card} from 'semantic-ui-react'\n \nimport axios from 'axios';\n\nfunction Content(props) {\n  const [authLoading, setAuthLoading] = useState(true);\n\n  useEffect(() => {\n    const token = getToken();\n    if (!token) {\n      return;\n    }\n \n    axios.get(`https://api.bybits.co.uk/policys/details`,\n    {headers:\n      {environment: 'mock',Authorization:`Bearer ${token}`,'Content-type':'application/json'}\n    }).then(response => {\n      console.log(response.data.policy)\n      setPolicySession(response.data)\n      setAuthLoading(false);\n    }).catch(error => {\n      removeUserSession();\n      setAuthLoading(false);\n    });\n  }, []);\n \n  if (authLoading && getToken()) {\n    return <div className=\"content\">Checking Authentication...</div>\n  }\n\n  const user = getUser();\n  const data=getPolicyData();\n  console.log(user)\n  console.log(data)\n  // handle click event of logout button\n  const handleLogout = () => {\n    removeUserSession();\n    props.history.push('/login-api');\n  }\n\n  if (!data) {\n    return <div className=\"content\">Checking Authentication...</div>\n  } return (\n     <Card centered> \n        <Card.Content>  \n        <Card.Header color='green'>Policy Reference</Card.Header>\n          <p> {data.policy.policy_reference} </p>  \n        <Card.Header>Cover Type</Card.Header>\n          <p>{data.policy.cover}</p>\n        <Card.Header>Car</Card.Header>\n          <p>{data.vehicle.make} {data.vehicle.model} {data.vehicle.model} {data.vehicle.reg}</p>\n        <Card.Header>Address</Card.Header>\n          <p>{data.policy.address.line_1} {data.policy.address.line_3} {data.policy.address.postcode}</p>\n\n        <input type=\"button\" className=\"ButtonClick\" onClick={handleLogout} value=\"Logout\" />\n        </Card.Content>\n    </Card> \n  );\n}\n \nexport default Content;","import React from 'react';\nimport { BrowserRouter,  Route} from 'react-router-dom';\nimport {Container } from 'semantic-ui-react'\nimport Login from './components/Login';\nimport Content from './components/Content';\n\n\n\nfunction App() {\n\n\n  return (\n    <div className=\"wrapper\">\n    <Container>\n      <BrowserRouter>\n             <Route exact path='/login-api' exact={true} component={Login}/>\n             <Route path='/private' exact={true} component={Content}/>\n      </BrowserRouter>\n    </Container>\n    </div>\n  );\n}\n \nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './App.css';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}